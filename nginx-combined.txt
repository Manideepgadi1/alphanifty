server {
    listen 80;
    server_name 82.25.105.18;

    # Main landing page
    location = / {
        root /var/www/html;
        try_files /index.html =404;
    }

    # Sector-Heatmap (main heatmap dashboard)
    location = /Sector-Heatmap {
        return 301 /Sector-Heatmap/;
    }
    location /Sector-Heatmap/ {
        alias /home/heatmap-dashboard/frontend/dist/;
        index index.html;
        try_files $uri $uri/ /Sector-Heatmap/index.html;
    }

    # Multi-charts (proxy to service on port 8001)
    location /multi-charts/ {
        proxy_pass http://127.0.0.1:8001/;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # RightTime (barline dashboard)
    location = /RightTime {
        return 301 /RightTime/;
    }
    location /RightTime/ {
        alias /var/www/barline/dist/;
        index index.html;
        try_files $uri $uri/ /RightTime/index.html;
    }

    # RightTime API proxy
    location /RightTime/api/ {
        proxy_pass http://127.0.0.1:8002/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # RightSector (right-sector dashboard)
    location = /RightSector {
        return 301 /RightSector/;
    }
    location /RightSector/ {
        alias /var/www/right-sector/;
        index dashboard.html;
        try_files $uri $uri/ /RightSector/dashboard.html;
    }

    # Heatmap API (for Sector-Heatmap backend)
    location /api/ {
        proxy_pass http://127.0.0.1:8000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # Risk-Reward Application (lowercase)
    location = /risk-reward {
        return 301 /risk-reward/;
    }
    location /risk-reward/ {
        rewrite ^/risk-reward/(.*)$ /$1 break;
        proxy_pass http://127.0.0.1:8003;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Prefix /risk-reward;
        proxy_redirect off;
    }

    # Risk-Reward Application (uppercase)
    location = /RiskReward {
        return 301 /RiskReward/;
    }
    location /RiskReward/ {
        rewrite ^/RiskReward/(.*)$ /$1 break;
        proxy_pass http://127.0.0.1:8003;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Prefix /RiskReward;
        proxy_redirect off;
    }

    location /riskometer {
        alias /var/www/riskometer;
        try_files $uri $uri/ /riskometer/index.html;
    }

    location /riskometer/api/ {
        proxy_pass http://127.0.0.1:8006/api/;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location = /riskometer/ {
        proxy_pass http://127.0.0.1:8006/;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
    }
    # Alphanifty Investment Platform
    # Alphanifty Backend API
    location /api/ {
        proxy_pass http://127.0.0.1:5000;
        proxy_http_version 1.1;
        proxy_set_header Host \System.Management.Automation.Internal.Host.InternalHost;
        proxy_set_header X-Real-IP \;
        proxy_set_header X-Forwarded-For \;
    }

    location /alphanifty/ {
        root /var/www/html/alphanifty_root;
        index index.html;
    }
}
